<form asp-action="Confirm" method="post" id="checkoutForm">

    @* giữ lại các id giỏ hàng *@
    @foreach (var item in Model)
    {
        <input type="hidden" name="gioHangIds" value="@item.MaGioHang" />
    }

    <div class="mb-3">
        <label class="form-label">Tên người nhận</label>
        <input type="text"
               name="tenNguoiNhan"
               class="form-control"
               required
               pattern="^[A-Za-zÀ-ỹ\s]+$"
               title="Tên chỉ được chứa chữ cái, không có số" />

    </div>

    <div class="mb-3">
        <label class="form-label">Số điện thoại</label>
        <input type="text"
               name="sdt"
               class="form-control"
               required
               pattern="^[0-9]{10}$"
               title="Số điện thoại phải đúng 10 chữ số" />

    </div>

    <div class="mb-3">
        <label class="form-label">Địa chỉ giao hàng</label>
        <input type="text"
               name="diaChi"
               class="form-control"
               required
               pattern="^(?=.*\d)(?=.*[A-Za-zÀ-ỹ]).{10,}$"
               title="Địa chỉ phải có số nhà, tên đường, quận và tỉnh" />

    </div>

    <div class="mb-3">
        <label class="form-label">Phương thức thanh toán</label>
        <select name="phuongThuc" class="form-select" required>
            <option value="">-- Chọn phương thức --</option>
            <option value="COD">Thanh toán khi nhận hàng</option>
            <option value="Chuyển khoản">Chuyển khoản ngân hàng</option>
        </select>
    </div>

    <!-- THÔNG BÁO LỖI -->
    <div class="text-danger mb-3" id="errorMsg" style="display:none">
         Vui lòng nhập đầy đủ thông tin trước khi thanh toán
    </div>

    <button type="submit"
            class="btn btn-success btn-lg"
            id="btnSubmit"
            disabled>
         Xác nhận thanh toán
    </button>
</form>
<script>
    const form = document.getElementById("checkoutForm");
    const btn = document.getElementById("btnSubmit");
    const errorMsg = document.getElementById("errorMsg");

    form.addEventListener("input", function () {
        if (form.checkValidity()) {
            btn.disabled = false;
            errorMsg.style.display = "none";
        } else {
            btn.disabled = true;
        }
    });

    form.addEventListener("submit", function (e) {
        if (!form.checkValidity()) {
            e.preventDefault();
            errorMsg.style.display = "block";
            errorMsg.innerText = " Vui lòng nhập đúng Tên (chỉ chữ) và SĐT (10 số)";
        }
    });
</script>


